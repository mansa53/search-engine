{"url": "https://www.reddit.com/r/learnprogramming/comments/9aheob/no_data_received_in_websockets_message_react/", "text": " \n\nI am currently able to emit, and receive websocket messages between server and client. (Using [Socket.io](https://Socket.io))  However, the data in the message shows as undefined in either direction. Some research showed that others have had similar symptoms with antivirus issues, but this does not seem to be the case here.\n\nClient code:\n\n    \n    import React, { Component } from 'react';\n    import './App.css';\n    import io from 'socket.io-client';\n    import {messageTypes, uri} from './constants/websockets.js';\n    const socket = io( uri );\n    \n    export const init = ( store ) => {\n      Object.keys( messageTypes )\n      .forEach( type => socket.on( type, ( payload ) =>\n      store.dispatch({ type, payload })\n    )\n    )\n    }\n    \n    class App extends Component {\n      constructor(props) {\n        super(props);\n    \n    }\n    \n      sendCmd() {\n        socket.emit('cmd');\n      }\n      componentDidMount() {\n        socket.on('connect', (data) => {\n          console.log('connected', data);\n        })\n    \n      }\n      render() {\n        return (\n          <div className=\"App\">\n            <header className=\"App-header\">\n     \n            </header>\n    \n            <button onClick={() => this.sendCmd()}>Send Command</button>\n          </div>\n        );\n      }\n    }\n    \n    export default App;\n    \n\nServer code:\n\n    var app = require('express')();\n    var server = require('http').Server(app);\n    var io = require('socket.io')(server);\n    io.set('origins', 'http://localhost:3000');\n    \n    var passport = require('passport');\n    var LocalStrategy = require('passport-local').Strategy;\n    var express = require('express');\n    var session = require('express-session');\n    var cors = require('cors');\n    var MongoStore = require('connect-mongo')(session);\n    var bodyParser = require('body-parser');\n    var mongoose = require('mongoose');\n    var cookieParser = require('cookie-parser');\n    mongoose.connect(process.env.MONGODB_URI);\n    var Models = require('./models');\n    var apiRoutes = require('./routes/api.js');\n    \n    \n    app.use('/api', apiRoutes);\n    \n     server.listen(8081);\n    io.on('connection', function(socket) {\n      console.log('connected to socket')\n      socket.emit('connect', {a: 'connected to server'});\n      socket.on('cmd', function (data) {\n        console.log('cmd', data);\n      });\n      socket.on('room', function(data) {\n        socket.broadcast.to(data.doc).emit('joined', data.user);\n        socket.join(data.doc);\n    \n      });\n    \n    });\n    \n    app.set('port', 8080);\n    \n    app.listen(app.get('port'), () => {\n      console.log(`Server is running on port ${app.get('port')}`)\n    })\n    ", "score": 1, "comments": [], "title": "No data received in websockets message (React Redux, NodeJS, socket.io)"}