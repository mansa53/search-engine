{"url": "https://www.reddit.com/r/learnprogramming/comments/9b7qj2/aspnet_mvc_i_need_to_implement_the_remember_me/", "text": "The issue is that even after my email address and passwords match i just cant login.  no error messages no exceptions  no nothing. i wish i could go on a little bit more detail but i simply dont know whats going on and how to solve it. \n\n\nthis is the Code for the Login action method \n\n        [HttpPost]\n        [ValidateAntiForgeryToken]\n        public ActionResult Login(User login, string ReturnUrl=\"\")\n        {\n            string message = \"\";\n          \n            {\n                var v = _context.User.FirstOrDefault(a => a.Email == login.Email);\n                if (v != null)\n                {\n                    if (v.IsEmailVerified!=true)\n                    {\n                        ViewBag.Message = \"Please verify your email first\";\n                        return View();\n                    }\n\n\n                    if (string.Compare(PasswordHashing.Hash(login.Password), v.Password) == 0)\n                    {\n                        int timeout = login.RememberMe ? 525600 : 20; // 525600 min = 1 year\n                        var ticket = new FormsAuthenticationTicket(login.Email, login.RememberMe, timeout);\n                        string encrypted = FormsAuthentication.Encrypt(ticket);\n                        var cookie =\n                            new HttpCookie(FormsAuthentication.FormsCookieName, encrypted)\n                            {\n                                Expires = DateTime.Now.AddMinutes(timeout),\n                                HttpOnly = true\n                            };\n                        Response.Cookies.Add(cookie);\n\n\n                        if (Url.IsLocalUrl(ReturnUrl))\n                       {\n                           return Redirect(ReturnUrl);\n                       }\n                        else\n                        {\n                            return RedirectToAction(\"Index\", \"Home\");\n                        }\n                    }\n                    else\n                    {\n                        message = \"Invalid credential provided\";\n                    }\n                }\n                else\n                {\n                    message = \"Invalid credential provided\";\n                }\n            }\n            ViewBag.Message = message;\n            return View();\n        }\n\n\nI would also like to add that before i created the cookie the code was working and i was able to match the credentials and login. ", "score": 1, "comments": [], "title": "[Asp.Net MVC ] I need to implement the remember Me feature in custom login and registration Module that i have created."}