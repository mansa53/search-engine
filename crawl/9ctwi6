{"url": "https://www.reddit.com/r/learnprogramming/comments/9ctwi6/nodejs_mongo_modelling_mongo_collection_design/", "text": "**MY Goal** : I want to query mongodb to get all the cars that belong to the same company **but** I don't want to search the whole db and then check each car record for its company name **rather** I want to have a list of all the cars of that same company at one place separate in my carGarage mongo collection so I can just get the whole list at once\\*\n\n\u200b\u200b\n\nThis is the kind of model I want : the problem is these company names are not hard-coded, i.e. if a new entry comes into database I will have to create a new list object with that name --> I think that can be done just using some if conditions in the nodejs backend.\n\n    \u200b\n    carsGarage {\n        bmw: [\n          car1 {\n            Model,  Year, PriceInINR,  Trim,\n            Engine, Body,color ,transmittion_type;\n            dealer - id_2: <<\n            },\n          car2 {\n            Model,  Year, PriceInINR,  Trim,\n            Engine, Body,color ,transmittion_type;\n            dealer - id_2: <<\n            \u200b\n            },\n         car3 {\n            Model,  Year, PriceInINR,  Trim,\n            Engine, Body,color ,transmittion_type;\n            dealer - id_2: <<\n            }\n        ],\n        \u200b\n        jaguar: [    \n            car1 {\n                Model,  Year, PriceInINR,  Trim,\n                Engine, Body,color ,transmittion_type;\n                dealer - id_2: <<\n                \u200b\n              },\n            car2 {\n                Model,  Year, PriceInINR,  Trim,\n                Engine, Body,color ,transmittion_type;\n                dealer - id_2: <<\n            }\n        ],\n        ferrari [\n            {-- -- --}\n            {-- -- --}\n            {-- -- --}\n        ]\n    }\n\n\u200b\n\n\u200b\n\nbut after reading about mongo : mainly about indexing I think there is another way I can do this.\n\nso now I have the structure as\n\n\u200b\n\n    \u200b\n    carsGarage {\n            car1 { bmw ,\n                Model,  Year, PriceInINR,  Trim,\n                Engine, Body,color ,transmittion_type;\n                dealer - id_2: <<\n            },\n            car2 {bmw ,\n                Model,  Year, PriceInINR,  Trim,\n                Engine, Body,color ,transmittion_type;\n                dealer - id_2: <<\n            },\n            car3 {jaguar ,\n                Model,  Year, PriceInINR,  Trim,\n                Engine, Body,color ,transmittion_type;\n                dealer - id_2: <<\n            }\n    \n            car4 { bmw,\n                Model,  Year, PriceInINR,  Trim,\n                Engine, Body,color ,transmittion_type;\n                dealer - id_2: <<\n            },\n            car5 { jaguar,\n                Model,  Year, PriceInINR,  Trim,\n                Engine, Body,color ,transmittion_type;\n                dealer - id_2: <<\n            }\n    \n            { ferrari -- -- --}\n            { ferrari -- -- --}\n            { ferrari -- -- --}\n    }\n    \u200b\n\n**the idea is** to make the company name as index : so as mongo specifies when it creates  indexes, it stores them separately so it could be searched faster, --> and it is not necessary that the indexes has to be unique it can be non-unique too\n\ne.g. `db.collection.createIndex( { name: -1 } , {unique = true})`\n\n\\--> but we can just drop the `{unique = true}` option\n\n`db.collection.createIndex( { name: -1 })`\\`\n\n\u200b\n\nso with that when I will find all the cars of any company I will get it faster.\n\n\u200b\n\n**THIS is all I can think of plz tell me am I right or not and how can I make my model better to make my search faster**\n\n\u200b\n\n\u200b\n\n\u200b\n\n\u200b\n\nfor now my model in nodejs looks like this\n\n    \u200b\n    \"use strict\";\n    const MONGOOSE = require(\"mongoose\"),\n    DB = MONGOOSE.connection;\n    \u200b\n    let carGarageSchema = MONGOOSE.Schema({\n     company: { \n                type: String, \n                required: true\n          },\n          model: {\n                type: String,\n                required: true\n          },\n          year: {\n                type: Number,\n                required: true\n          },\n          PriceInINR: {\n                type: Number,\n                required: true\n          },\n          trim: {\n                type: String,\n                required: true\n    \n          },\n          engine: {\n                type: String,\n                required: true\n          },\n          body: {\n                type: String,\n                required: true\n          },\n          color: {\n                type: String,\n                required: true\n          },\n          transmission: {\n                type: String,\n                required: true\n          },\n          dealer_id: {\n                type: String,\n                required: true\n          }\n    });\n    \n    let collection_name = \"carsGarage\";\n    \n    let carGarageModel = MONGOOSE.model(collection_name, carGarageSchema);\n    createAscendingIndex_on_car_make(DB);\n    \n    module.exports = carGarageModel;\n    \n    \n    //   indexing  at schema level -->  using node js\n    \n    function createAscendingIndex_on_car_company(DB, callback) {\n        let collection = DB.collection(collection_name);\n        \n        // ? Create the index\n        collection.createIndex({\n                company: 1, // specifies : indexing type is ascending indexing\n        }, function (err, result) {\n            if (err) {\n                console.log(err);\n            }\n            // callback(\"result\");\n        });\n    }\n    \u200b\n\n\u200b", "score": 1, "comments": [], "title": "[ Nodejs, Mongo ] modelling mongo collection design"}