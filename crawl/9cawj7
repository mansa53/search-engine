{"url": "https://www.reddit.com/r/learnprogramming/comments/9cawj7/how_do_i_query_mongodb_and_serve_the_data_through/", "text": "Hey,\n\nSo basically I am creating an app that will make it easier to compare unit stats for a game. I found a tool online to extract the db tables from the game and have successfully seeded them into a MongoDB db on my machine. I have created an app with a React frontend and a NodeJS backend. I have set up the routes for the NodeJS backend and have been able to successfully query the DB for the information I want, but how do I actually make the information available to the front end? \n\nI have tried using res.json to send it as an object to the URL and then have axios fetch it into React but I keep getting errors. What am I missing here? How do I set up my localhost to actually be holding the information so that I can hit it like an endpoint for a normal API?\n\nAny advice or pointing in the right direction would be much appreciated. :)\n\nEdit:\n\nBackend App.js File\n\n    const express = require(\"express\");\n    const app = express();\n    const indexRouter = require(\"./routers/index\");\n    const allDataRouter = require(\"./routers/allData\");\n    const mongoose = require(\"mongoose\");\n\n    mongoose.connect(\"mongodb://localhost:27017/warhammer\");\n    const db = mongoose.connection;\n    db.on(\"error\", console.error.bind(console, \" connection error:\"));\n    db.once(\"open\", function() {\n      console.log(\"connected to the Warhammer db!\");\n    });\n\n    app.listen(3001);\n\n    app.use(\"/\", indexRouter);\n    app.use(\"/allData\", allDataRouter);\n\nBacken - AllData.js \n\n    const express = require(\"express\");\n    const router = express.Router();\n\n    const unitsController = require(\"../controllers/unitsController\");\n\n    router.get(\"/units/:id\", unitsController.unit_detail);\n\n    router.get(\"/units\", unitsController.unit_list);\n\n    router.get(\"/\", unitsController.index);\n\n    module.exports = router;\n\nBackend - UnitsControllers.js file - I have put a sample unit in the controller function to see if I could get ANY data before I tried to hit all the actual data from the DB.\n\n    // Display list of all units.\n    exports.unit_list = function(req, res) {\n      res.json({\n        name: \"supreme_sorceress_beasts_2\",\n        category: \"cavalry\",\n        accuracy: 10,\n        reload: 10,\n        primary_ammo: 0,\n        secondary_ammo: 0,\n        size: \"large\",\n        hitpoints: 4412,\n        armour: 60,\n        missileblock: \"NaN\",\n        leadership: 75,\n        melee_attack: 39,\n        melee_defence: 30,\n        charge_bonus: 30,\n        physical_resist: 0,\n        magic_resist: 0,\n        fire_resist: 0,\n        missile_resist: 15,\n        damage_resist: 0,\n        attributes: \"wh_encourage_fear_hideForest\",\n        can_skirmish: \"FALSE\"\n      });\n    }\n\nFrontEnd - Units.js - This is the file where I am attempting to access the API\n\n    import React from \"react\";\n    import InfoCardUnits from \"./InfoCardUnits\";\n    const axios = require(\"axios\");\n\n    function fetchData() {\n      axios\n        .get(\"http://localhost:3001/allData/units\")\n        .then(function(response) {\n          // handle success\n          console.log(response);\n          console.log(\"Success\");\n        })\n        .catch(function(error) {\n          // handle error\n          console.log(error);\n          console.log(\"failure\");\n        })\n        .then(function() {\n          // always executed\n        });\n      // return myUnitData;\n    }", "score": 3, "comments": [{"body": "Can you provide the source code and errors for your issue?", "id": "e59d4ww", "replies": [{"body": "Hey mate I have updated the original post if you are still willing to take a look?", "id": "e5crhga", "replies": []}]}], "title": "How do I query MongoDb and serve the data through NodeJS so my React app can access it?"}