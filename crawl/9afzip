{"url": "https://www.reddit.com/r/learnprogramming/comments/9afzip/creating_a_method_of_a_class_and_passing_a_list/", "text": "So there is a class \"Menu\" that has certain parameters passed into it . \n\nInside the class there are some functions. One of the functions called \"calculate\\_bill\" commented as \" # Problem Function\" is giving out an error.\n\nBasically \"purchased\\_items\" is a list of all the purchased items.  I want the function \"calculate\\_bill\" return the total price of a purchase of all the items in \"purchased\\_items\". \n\n    class Menu(object):\n      def __init__(self,name,items,start_time,end_time):\n        self.name = name\n        self.items = items\n        self.start_time = start_time\n        self.end_time = end_time\n      \n      def __repr__(self):\n        return (\"Name of menu %s and is available from %d to %d\" % (self.name,self.start_time,self.end_time))  \n     \n      def calculate_bill(self,purchased_items):     # Problem Function\n        self.purchased_items = purchased_items\n        calculate_bill = 0\n        for i in purchased_items :     # purchased_items is a list of all the items purchased \n          calculate_bill += items[i]\n          return calculate_bill \n    \n    items = { 'pancakes':7.50,'waffles':9.00,'burger':11.00,'home fries':4.50,'coffee':11.50,'espresso':3.00,'tea':1.00,'mimosa':10.50,'orange juice':3.50}\n    \n    brunch = Menu('Brunch',items,11,16)   \n    \n    items = { 'salumeria plate':8.00,'salad and breadsticks(serves 2, no refills)':14.00,'pizza with quattro formaggi':9.00,'duck ragu':17.50,'mushroom ravioli(vegan)':13.50,'coffee':1.50,'espresso':3.00,}\n    \n    early_bird = Menu('Early Bird',items,15,18)\n    \n    items = { 'crostini with eggplant caponata':13.00,'ceaser salad':16.00,'pizza with quattro formaggi':11.00,'duck ragu':19.50,'mushroom ravioli(vegan)':13.50,'coffee':2.00,'espresso':3.00}\n    \n    dinner = Menu('Dinner',items,17,23)\n    \n    a = brunch.calculate_bill(['pancakes','home fries','coffee'])\n    b = early_bird.calculate_bill(['salumeria plate','mushroom ravioli(vegan)']) \n    print (a)\n    print (b)\n\nDesired output :\n\n    13.5\n    21.5\n\nError Output:\n\n    Traceback (most recent call last):\n      File \"script.py\", line 32, in <module>\n        a = brunch.calculate_bill(['pancakes','home fries','coffee'])\n      File \"script.py\", line 15, in calculate_bill\n        calculate_bill += items[i]\n    KeyError: 'pancakes'\n\n&#x200B;", "score": 7, "comments": [{"body": "Your error is due to the program accessing the wrong scope.  'items' as you've defined it is the last dictionary defined here:\n\n    items = { 'crostini with eggplant caponata':13.00,'ceaser salad':16.00,'pizza with quattro formaggi':11.00,'duck ragu':19.50,'mushroom ravioli(vegan)':13.50,'coffee':2.00,'espresso':3.00}\n\nThe first 2 declarations of 'items' has been overwritten (but they are stored within the objects you've created).  So when your code runs, its looking for items that are not in this dictionary, hence the 'pancakes' key error.  Pancakes doesn't exist within this particular dictionary.\n\n&#x200B;\n\nWhat you need to do is change it to access the item dictionary stored within the object by doing:\n\n    for i in purchased_items :     # purchased_items is a list of all the items purchased \n        calculate_bill += self.items[i]\n        return calculate_bill  #  <--- Check the indentation on this line, pretty sure you don't want this indented like this.\n\n&#x200B;", "id": "e4v6ba9", "replies": [{"body": "Oh I see so it's just looking for pancakes in the last declared items dictionary and can't find it so it's showing key error. Yeah should've put self.items\\[i\\] for it to look up . Ty\n\n&#x200B;", "id": "e4v7q9z", "replies": []}]}, {"body": "It's been awhile since I've written Python, but it should work if you specify `self`:\n\n    calculated_bill += self.items[i]\n\nAnd don't create variables with the same name as functions. That's just asking for problems later. ", "id": "e4v648u", "replies": [{"body": "yea i got it man ty ", "id": "e4v7rh0", "replies": []}]}, {"body": "You should post this questions to r/learnpython and not this sub (you just double post your questions right now to both subs).\n\nAnd take a course at codecademy. Most of your questions will disappear.\n \nP.S. And, yes, the error you are getting is because you don\u2019t even have an items variable in that scope.", "id": "e4v4tjl", "replies": [{"body": "Is double posting not allowed?", "id": "e4v56ga", "replies": [{"body": "Of course it is and posting here is fine. ", "id": "e4v67e7", "replies": [{"body": "Well, I think you\u2019ve meant **it is not** :)\n\nAnd of course, there are some **do nots** in the sub\u2019s rules. One of them is \u201cdo not use this sub as a proxy to google\u201d. \n\nOP\u2019s question can be easily resolved with this [query](https://www.google.ru/search?q=python+access+class+properties) and reading through the doc at python.org", "id": "e4vahuc", "replies": []}]}]}, {"body": "[deleted]", "id": "e4v66xp", "replies": [{"body": "Well, that's not true either, `UnboudLocalError` would be thrown if `calculated_bill` wouldn't be initialized before the `for` loop. In the OPs case it's `KeyError` or `NameError` depending on initialization of `items` variable and method calls.\n\nWhat I've meant was the point u/Bronegan mentioned.\n\nShould've reworded my comment, though...", "id": "e4v9kaw", "replies": []}]}]}], "title": "Creating a method of a class and passing a list as a argument (Please help)"}