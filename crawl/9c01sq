{"url": "https://www.reddit.com/r/learnprogramming/comments/9c01sq/c_multiplying_2_given_matrices_wrong_output/", "text": "So basically im multiplying 2 matrices given from 2 different .txt files\n\n\u200b\n\n**matrix1.txt is**\n\n>1 0 3 -12 1 0 2\n\n**matrix2.txt is**\n\n>4 1 0-1 1 32 0 11 3 4\n\n**the correct expected answer should be inside another .txt file which is**\n\n>9.00 -2.00 -1.009.00 9.00 11.00\n\n\u200b\n\n* but, im getting an **ERROR** msg inside the output.txt file instead of the correct matrix answer.\n\ni hope if someone can find what im doing wrong?\n\n\u200b\n\n\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\\_\n\n# here is my code\n\n# [https://codeshare.io/29r09M](https://codeshare.io/29r09M)\n\n\u200b\n\nor below\n\n\u200b\n\n    #include<iostream>\n    //#include<curses.h>\n    #include <iomanip>\n    //#include<process.h>\n    #include <sstream>\n    #include <string>\n    #include <fstream>\n    \n    \n    using namespace std;\n    \n    int checkString(string s) { // checks if string has only digits '.'\n    \tint flag = 0;// initially flag is 0\n    \tfor (int i = 0; i<s.length(); i++) {\n    \n            if (s[i] >= 48 && s[i] <= 57 || s[i] == '.') {// if string has something instead of digits '.' then make flag 1 and break the loop\n    \t\t\tif (s[i] == '.') {\n    \t\t\t\tif (s[i + 1] >= 48 && s[i] <= 57)\n    \t\t\t\t\tflag = 0;\n    \t\t\t\telse// if string has something instead of digits after '.' then make flag 1 and break the loop\n    \t\t\t\t{\n                        flag = 1;\n    \t\t\t\t\tbreak;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t\tflag = 0;\n    \t\t}\n    \t\telse\n    \t\t{\n    \t\t\tflag = 1;\n    \t\t\tbreak;\n    \t\t}\n    \t}\n    \treturn flag;//return the flag to where the function is executed\n    }\n    \n    int main(int argc, char** args) {\n    \n    \tstring file1, file2, output;// file 1 is input name of file for matrix A, file2 is for B and output is for c\n    \tstring temp = \"\";//input string from user\n    \tfor(int i=1;i<argc;i++) {\n    \t\tstring t(args[i]);\n    \t\ttemp +=t +\" \"; }\n    \n    \t//cout<<temp;\n    \tif (temp.find(\";\")<50)//checks if it has semi colon in it\n    \t{\n    \n    \t\tint start = temp.find(\"=\", 0, 1);// find first =\n    \t\tint close = temp.find(\";\", 0, 1);// find semi colon\n    \t\tfile1 = temp.substr(start + 1, close - 1 - start);// cut string between them\n    \t\tstart = temp.find(\"=\", close + 1, 1);\n    \t\tclose = temp.find(\";\", start + 1, 1);\n    \t\tfile2 = temp.substr(start + 1, close - 1 - start);\n    \t\tstart = temp.find(\"=\", close + 1, 1);\n    \t\tclose = temp.length() - 1;\n    \t\toutput = temp.substr(start + 1, close - start -1);\n    \t}\n    \n    \telse// if string does not have semi colons\n    \n    \t{\n    \n    \t\tint start = temp.find(\"A\", 0, 1);\n    \t\tstart = temp.find(\"=\", start + 1, 1);// check for =\n    \t\tint close = temp.find(\" \", start, 1);//check for space\n    \t\tfile1 = temp.substr(start + 1, close - 1 - start);//cut string between them\n    \t\tstart = temp.find(\"=\", close + 1, 1);\n    \t\tclose = temp.find(\" \", start + 1, 1);\n    \t\tfile2 = temp.substr(start + 1, close - 1 - start);\n    \t\tstart = temp.find(\"=\", close + 1, 1);\n    \t\tclose = temp.length();\n    \t\toutput = temp.substr(start + 1, close - start - 2);\n    \n    \t}\n        \n    \t//cout<<endl<<file1<<\" \"<< file2<<\" \"<< output;\n    \n    \tdouble a[20][20], b[20][20];//2 input matrices which are to be multiplied\n    \tint rows1 = 0, cols1 = 0;// initially rows and columns for A is 0\n    \tstd::ifstream file(file1.c_str());// read file with matrix A\n    \tstd::string str;\n    \tofstream myfile;// define the output file\n    \tmyfile.open(output.c_str());\n    \twhile (std::getline(file, str))//reading line by line\n    \n    \t{\n    \t\tstring s1 = \"\";\n    \t\tstringstream toint(str);\n    \t\twhile (toint >> s1)\n    \t\t{\n    \n    \t\t\tif (checkString(s1) == 1)// if flag is 1 then print error\n    \t\t\t{\n    \t\t\t\tmyfile << \"error\" << endl;\n    \t\t\t\treturn 0;\n    \t\t\t}\n    \t\t}\n    \t}\n    \n    \tstd::ifstream filed(file1.c_str());\n    \n    \tint prev = 0;\n    \twhile (std::getline(filed, str))\n    \t{\n    \t\tcols1 = 0;\n    \t\tstringstream toint(str);\n            \n    \t\twhile (toint >> a[rows1][cols1++])// fill in the double data to matrix a\n            {\n    \t\t}\n    \n    \t\tif (rows1 == 0)\t{\n    \t\t\tprev = cols1;\n    \t\t}\n    \n    \t\telse {\n    \n    \t\t\tif (prev != cols1)//checking if all rows have same columns\n    \t\t\t{\n    \t\t\t\tmyfile << \"error\" << endl;\n    \t\t\t\treturn 0;\n    \t\t\t}\n    \t\t}\n    \t\trows1++;\n    \t}\n    \n    \tcols1--;\n    \n    \tint rows2 = 0, cols2 = 0;\n    \tstd::ifstream files(file2.c_str());\n    \n    \twhile (std::getline(files, str))\n    \t{\n    \t\tstring s1 = \"\";\n    \t\tstringstream toint(str);\n            \n    \t\twhile (toint >> s1)\n    \t\t{\n    \t\t\tif (checkString(s1) == 1)\n    \t\t\t{\n    \t\t\t\tmyfile << \"error\" << endl;\n                    return 0;}}}\n    \n    \tstd::ifstream fileds(file2.c_str());\n    \tprev = 0;\n    \n    \twhile (std::getline(fileds, str)){\n    \n    \t\tcols2 = 0;\n    \t\tstringstream toint(str);\n    \n    \t\twhile (toint >> b[rows2][cols2++]){\n    \t\t}\n    \n    \t\tif (rows2 == 0){\n    \t\t\tprev = cols2;\n                \n    \t\t}else{\n    \n    \t\t\tif (prev != cols2){\n    \t\t\t\tmyfile << \"error\" << endl;\n    \t\t\t\treturn 0;\n    \t\t\t}}\n    \t\trows2++;}\n    \n    \tcols2--;\n    \n    \tdouble result[20][20];\n    \n    \t//checking if 2 matrices can be multiplied\n    \n    \tif (rows1 != cols2 || rows2 != cols1){\n    \t\tmyfile << \"error\" << endl;\n    \t\treturn 0;\n            \n    \t}else{\n            \n    \t\t// multiplying the matrices\n    \t\tfor (int i = 0; i < rows1; i++){\n                \n    \t\t\tfor (int j = 0; j < cols2; j++){\n    \t\t\t\tresult[i][j] = 0;\n                    \n    \t\t\t\tfor (int k = 0; k < rows2; k++){\n    \t\t\t\t\tresult[i][j] += a[i][k] * b[k][j];\n    \t\t\t\t}}}\n    \n    \t\tmyfile << std::fixed;\n    \t\tmyfile << std::setprecision(2);// setting output upto 2 decimals\n    \n    \t\tfor (int i = 0; i<rows1; i++){\n    \t\t\tfor (int j = 0; j<cols2; j++){\n    \t\t\t\tmyfile << result[i][j] << \" \";// printing matrix in output file\n    \t\t\t}\n    \t\t\tmyfile << endl;}\n            \n    \t\tmyfile.close();}\n    \treturn 0;}\n\n\u200b\n\ncheck this image \n\n[https://ibb.co/mBHJVK](https://ibb.co/mBHJVK)", "score": 2, "comments": [{"body": "> im getting an ERROR msg\n\nWhat is it?", "id": "e572121", "replies": [{"body": "an ERROR text.\n\nnot and actual coding error. The output.txt file has only TEXT LINE \"ERROR\" inside it instead of showing the correct answer of multiplying the matrices ", "id": "e5727wx", "replies": [{"body": "Your program writes that.  Which error message is it?", "id": "e572co5", "replies": [{"body": "[https://ibb.co/mBHJVK](https://ibb.co/mBHJVK) check this image", "id": "e5733qh", "replies": [{"body": "I know it says \"error\", that's all your program prints.\n\nInstead of\n\n    if (prev != cols2){\n        myfile << \"error\" << endl;\n\nwhy not have\n\n    if (prev != cols2){\n        myfile << \"error prev!=cols2 : \" << prev << \"!=\" << cols2 << endl;\n\nand make debugging easier for yourself?", "id": "e573790", "replies": []}]}]}]}]}], "title": "[C++] Multiplying 2 given matrices wrong output"}