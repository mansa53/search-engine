{"url": "https://www.reddit.com/r/learnprogramming/comments/9azk9u/javascript_vanilla_array_help_with_redux/", "text": "I have this code: \n\n    <!DOCTYPE html>\n    <html>\n\n    <head>\n        <title>Todo List</title>\n        <script src=\"https://unpkg.com/redux@latest/dist/redux.min.js\"></script>\n    </head>\n\n    <body>\n        <div>Todo List:\n            <span id=\"todo-list\">no items</span>\n        </div>\n        <div>\n            <input type \"text\" id=\"todo-input\" />\n            <button id=\"add-todo\">Add Todo</button>\n\n            <script>\n                var reducer = function (state, action) {\n                    if (typeof state === 'undefined') {\n                        return {\n                            todos: [],\n                        };\n                    }\n\n                    const { type, payload } = action;\n\n                    switch (type) {\n                        case 'ADD_TODO':\n                            {\n                                console.log(\"adding a TODO\")\n                                return { ...state, todos: payload };\n                            }\n                        default:\n                            {\n                                console.log(\"Unhandled action\", type);\n                                return state;\n                            }\n                    }\n                };\n\n                var store = Redux.createStore(reducer);\n                var todoList = document.getElementById('todo-list')\n\n                function render() {\n\n                    \n                    todoList.innerHTML =store.getState().todos.toString()\n                }\n\n                document.getElementById('add-todo')\n                    .addEventListener('click', function () {\n                        store.dispatch({\n                            type: 'ADD_TODO',\n                            payload: document.getElementById('todo-input').value\n                        })\n                    });\n\n                store.subscribe(render);\n                render();\n            </script>\n    </body>\n\n    </html>\n\n\nAnd I would like to be able to add new items to my list, but so far when I submit a new item it just replaces the old one. How can I create an array of todo objects?", "score": 1, "comments": [{"body": "Append the state\n\n{ ...state, todos: state.todos.concat(payload) }\n\nIf you dont send a payload in with your actions, modify them so they do... action.payload can be set when you are dispatching the action \n\nEdit: also you will need to clone state.todos somehow not just modify it in place, you can use anything for this underscore, Ramda etc.", "id": "e4z78pp", "replies": [{"body": "thank you\n", "id": "e4zfsip", "replies": []}]}], "title": "Javascript Vanilla Array help with Redux"}