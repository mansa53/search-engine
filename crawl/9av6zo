{"url": "https://www.reddit.com/r/learnprogramming/comments/9av6zo/why_is_my_bot_answering_to_itself_in_comments/", "text": "I was currently testing my reddit bot in Node.JS that tells facts about some animals.\n\nFor some reasons unknown to me, it sometimes answers to itself (did it with the otter answer and the chimpanzee one during testing). It doesn't seem to do it in a spam way (until blocked by rate limit).\n\nThe script is hosted on a Google Cloud VPS, so I'm pretty sure connection errors aren't the issue here.\n\nI hope this doesn't break the bot rule as I don't intend on releasing it in the wild, was just curious about what is wrong in my code.\n\n[Source](https://github.com/alexislours/NatureFactsBot/blob/master/app.js)\n\nedit : phrasing", "score": 4, "comments": [{"body": "Does it respond to each comment or only certain facts?\n\nHave you tried enclosing your OR statements\n\n    comment.body.toString().toLowerCase().includes(\" hummingbird\") || comment.body.toString().toLowerCase().includes(\" hummingbirds\")    \n\nin parenthesis to separate them from the AND? As of right now I think it's checking to see if a comment contains \"hummingbird\" OR it's checking to see if a statement contains \"hummingbirds\" and isn't posted by you. So if it contains \"hummingbird\", it isn't going to check if the comment is posted by you or not, as the condition has already been filled.\n\nIf you look [here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence) you can see that the logical OR precedence in higher than your logical AND precedence, so you should wrap it in parenthesis I think.\n\nI might be incorrect though, logical operator precedence is confusing.", "id": "e4yg4t6", "replies": [{"body": "It didn't always do it and seemed pretty random. If it didn't check if it was posted by the bot, shouldn't it loop until rate limited by Reddit?(this is what bugged me off)\nI couldn't really reproduce it on purpose while bug testing but will try to apply this method tomorrow to see if it doesn't reply to itself in any ways.", "id": "e4yiuw5", "replies": []}]}, {"body": "Not quite related to your question, but just a couple of observations that may well be wrong.\n\nYou might make your code more maintainable and easier to extend if you make the trigger word and response some pairing and then store those in an array or something, then iterate through that, rather than have many if/else if's.\n\nAlso I think you could simplify your conditional plural check, if `.includes()` works the way I think it does.  \nChecking for say `\"hummingbird\"` should also return `true` if the string contains `\"hummingbirds\"`.\n\nEdit: Oh and I agree with curt_schilli, I think you might have to wrap your OR in parentheses to fix the behaviour.", "id": "e4yrafu", "replies": []}], "title": "Why is my bot answering to itself in comments?"}