{"url": "https://www.reddit.com/r/learnprogramming/comments/9b8lnk/cprogram_giving_segmentation_fault_sigsegv_for/", "text": "The given program finds prime numbers between two given numbers but it gives  ***Segmentation Fault (SIGSEGV)*** for ***array size greater than 10******^(4)*** . can someone please tell me the problem in my code. I need it to run for array size of 10^(9) .\n\n`#include <stdio.h>`\n\n`#include<stdbool.h>`\n\n`#define MAX 100000`\n\n`bool arr[MAX+1];`\n\n\u200b\n\n`int main()`\n\n`{`\n\n`int n,a,b,i,j,flag,p=2;`\n\n`arr[0]=-1,arr[1]=-1;`\n\n`for(i=2;i<MAX;i++)`\n\n`{`\n\n`for(j=p;j<MAX;j++)`\n\n`{`\n\n`if(p*j<MAX)`\n\n`arr[p*j]=true;`\n\n`}`\n\n`p++;`\n\n`}`\n\n`scanf(\"%d%d\", &a, &b);`\n\n`for(i=a;i<=b;i++)`\n\n`{`\n\n`if(arr[i]==false)`\n\n`printf(\"%d\\n\",i);`\n\n`}`\n\n`printf(\"\\n\")`\n\n`return 0;`\n\n`}`\n\n`\u200b`", "score": 1, "comments": [{"body": "`arr[p*j]` is gonna cause the trouble. It'll try to access out of bound memory, so the Segmentation fault. ", "id": "e51dqag", "replies": [{"body": "Thanks.", "id": "e51l7i2", "replies": []}]}, {"body": "This is not very good code, you compare every p * j with max, when only a tiny fraction of that will ever pass the check. You should structure your loops in a more intelligent way.", "id": "e513qd4", "replies": []}, {"body": "Try printing `p*j` in the loop.\n", "id": "e513fmf", "replies": []}, {"body": "Try using malloc to allocate memory instead of using array and iterate using pointers. ", "id": "e516q7o", "replies": []}], "title": "[C]Program giving Segmentation Fault (SIGSEGV) for large input."}